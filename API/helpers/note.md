Reusuable Functions to simplify middleware